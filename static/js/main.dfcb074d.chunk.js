(this["webpackJsonpreact-snake-game"]=this["webpackJsonpreact-snake-game"]||[]).push([[0],{21:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(12),a=n.n(o),i=(n(21),n(16)),s=n(2),d=n(5),b=n(3);for(var u,j,O,h,l,p=function(e,t){return e.x===t.x&&e.y===t.y},f=n(4),x=n(1),g=f.a.div(u||(u=Object(b.a)(["\n    position: relative;\n    width: ",";\n    height: ",";\n    border: 5px solid ",";\n    margin-left: 4px;\n    box-sizing: content-box;\n"])),(function(e){return e.width+"px"}),(function(e){return e.height+"px"}),(function(e){return e.borderColor})),y=function(e){return Object(x.jsx)(g,{width:e.width,height:e.height,borderColor:e.borderColor,children:e.children})},w=10,E=f.a.div.attrs((function(e){return{style:{left:e.left+"px",top:e.top+"px",background:e.background,border:e.border?"1px solid #aaa":"none"}}}))(j||(j=Object(b.a)(["\n  position: absolute;\n  width: ",";\n  height: ",";\n"])),"10px","10px"),k=function(e){var t=e.left,n=e.top,r=e.background,c=e.border;return Object(x.jsx)(E,{left:t,top:n,background:r,border:c})},v=function(e){var t=e.pixels,n=e.showGrid;return Object(x.jsx)(c.a.Fragment,{children:t.map((function(e){return Object(x.jsx)(k,{left:e.position.x*w,top:e.position.y*w,background:e.background,border:n},e.id)}))})},G=c.a.memo(v),S=function(e){var t=e.positions;return Object(x.jsx)(c.a.Fragment,{children:t.map((function(e){return Object(x.jsx)(k,{left:e.x*w,top:e.y*w,background:"black"},"".concat(e.x,"_").concat(e.y))}))})},m=function(e){var t=e.position;return Object(x.jsx)(k,{left:t.x*w,top:t.y*w,background:Math.floor(10*Math.random())<5?"red":"blue"})},_=c.a.memo(m),A=f.a.div(O||(O=Object(b.a)(["\n  display: grid;\n  justify-content: center;\n  gap: 4px;\n"]))),C=f.a.div(h||(h=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),I=f.a.div(l||(l=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),R=[],T=0;T<30;T++)for(var N=0;N<50;N++)R.push({id:T+"_"+N,position:{x:N,y:T},background:"white"});var D={snake:[{x:0,y:0},{x:1,y:0},{x:2,y:0}],food:{},direction:"right",directionQueue:[],gameOver:null,paused:!1,score:0,highestScore:0,showGrid:!1},H=function(e,t){var n,r,c=e.snake,o=e.food,a=e.direction,i=e.directionQueue,b=e.paused,u=e.score,j=e.highestScore,O=e.showGrid;switch(t.type){case"SNAKE_STEP":for(var h=a,l=Object(d.a)(i);l.length>0;){var f=l.shift();if(r=h,!("left"===(n=f)&&"right"===r||"right"===n&&"left"===r||"up"===n&&"down"===r||"down"===n&&"up"===r)){h=f;break}}var x,g=Object(d.a)(c),y=g[g.length-1];switch(h){case"right":x=Object(s.a)(Object(s.a)({},y),{},{x:y.x+1});break;case"left":x=Object(s.a)(Object(s.a)({},y),{},{x:y.x-1});break;case"up":x=Object(s.a)(Object(s.a)({},y),{},{y:y.y-1});break;case"down":x=Object(s.a)(Object(s.a)({},y),{},{y:y.y+1})}return x.y>=30||x.y<0||x.x<0||x.x>=50||g.some((function(e){return p(e,x)}))?Object(s.a)(Object(s.a)({},e),{},{gameOver:"lose"}):p(x,o)?Object(s.a)(Object(s.a)({},e),{},{snake:[].concat(Object(d.a)(g),[x]),direction:h,directionQueue:l,score:u+1}):Object(s.a)(Object(s.a)({},e),{},{snake:[].concat(Object(d.a)(g.splice(1)),[x]),direction:h,directionQueue:l});case"SPAWN_FOOD":var w=R.filter((function(e){return!c.some((function(t){return p(t,e.position)}))&&!p(o,e.position)}));if(0===w.length)return Object(s.a)(Object(s.a)({},e),{},{gameOver:"win"});var E=Math.floor(Math.random()*w.length);return Object(s.a)(Object(s.a)({},e),{},{food:w[E].position});case"CHANGE_DIRECTION":return Object(s.a)(Object(s.a)({},e),{},{directionQueue:[].concat(Object(d.a)(i),[t.payload])});case"PAUSE_GAME":return Object(s.a)(Object(s.a)({},e),{},{paused:!b});case"RESET_GAME":return Object(s.a)(Object(s.a)({},D),{},{highestScore:j,showGrid:O});case"SET_HIGHEST_SCORE":return Object(s.a)(Object(s.a)({},e),{},{highestScore:u});case"TOGGLE_GRID":return Object(s.a)(Object(s.a)({},e),{},{showGrid:t.payload})}},M=function(){var e=Object(r.useReducer)(H,D),t=Object(i.a)(e,2),n=t[0],c=t[1],o=n.snake,a=n.food,s=n.gameOver,d=n.paused,b=n.score,u=n.highestScore,j=n.showGrid;!function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){c({type:"SNAKE_STEP"})}),s||d?null:50);var O=Object(r.useCallback)((function(e){switch(e.key){case"ArrowLeft":case"a":case"A":c({type:"CHANGE_DIRECTION",payload:"left"});break;case"ArrowRight":case"d":case"D":c({type:"CHANGE_DIRECTION",payload:"right"});break;case"ArrowUp":case"w":case"W":c({type:"CHANGE_DIRECTION",payload:"up"});break;case"ArrowDown":case"s":case"S":c({type:"CHANGE_DIRECTION",payload:"down"})}}),[c]);Object(r.useEffect)((function(){s?(window.removeEventListener("keydown",O),b>u&&c({type:"SET_HIGHEST_SCORE"})):(c({type:"SPAWN_FOOD"}),window.addEventListener("keydown",O))}),[s,b,u,O]);return Object(x.jsxs)(A,{children:[Object(x.jsxs)(C,{children:[Object(x.jsxs)("h4",{children:["Score: ",b]}),Object(x.jsxs)("h4",{children:["Highest Score: ",u]})]}),Object(x.jsxs)(y,{width:500,height:300,borderColor:s?"win"===s?"green":"red":"black",children:[Object(x.jsx)(G,{pixels:R,showGrid:j}),Object(x.jsx)(S,{positions:o}),Object(x.jsx)(_,{position:a})]}),Object(x.jsxs)(I,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"checkbox",id:"showGrid",onChange:function(e){c({type:"TOGGLE_GRID",payload:e.target.checked})}}),Object(x.jsx)("label",{htmlFor:"showGrid",children:"Show grid"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(){c({type:"RESET_GAME"})},children:"Play again"}),!s&&Object(x.jsx)("button",{onClick:function(){c({type:"PAUSE_GAME"})},children:d?"Resume":"Pause"})]})]})]})};a.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(M,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.dfcb074d.chunk.js.map