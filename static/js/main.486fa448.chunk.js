(this["webpackJsonpreact-snake-game"]=this["webpackJsonpreact-snake-game"]||[]).push([[0],{21:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(12),o=n.n(a),i=(n(21),n(16)),s=n(2),b=n(5),d=n(3);for(var u,j,O,h,l,p=function(e,t){return e.x===t.x&&e.y===t.y},f=n(4),x=n(1),g=f.a.div(u||(u=Object(d.a)(["\n    position: relative;\n    width: ",";\n    height: ",";\n    border: 5px solid ",";\n    margin-left: 4px;\n    box-sizing: content-box;\n"])),(function(e){return e.width+"px"}),(function(e){return e.height+"px"}),(function(e){return e.borderColor})),y=function(e){return Object(x.jsx)(g,{width:e.width,height:e.height,borderColor:e.borderColor,children:e.children})},w=10,E=f.a.div.attrs((function(e){return{style:{left:e.left+"px",top:e.top+"px",background:e.background,border:e.border?"1px solid #aaa":"none"}}}))(j||(j=Object(d.a)(["\n  position: absolute;\n  width: ",";\n  height: ",";\n"])),"10px","10px"),k=function(e){var t=e.left,n=e.top,c=e.background,r=e.border;return Object(x.jsx)(E,{left:t,top:n,background:c,border:r})},v=function(e){var t=e.pixels,n=e.showGrid;return Object(x.jsx)(r.a.Fragment,{children:t.map((function(e){return Object(x.jsx)(k,{left:e.position.x*w,top:e.position.y*w,background:e.background,border:n},e.id)}))})},S=r.a.memo(v),m=function(e){var t=e.positions;return Object(x.jsx)(r.a.Fragment,{children:t.map((function(e){return Object(x.jsx)(k,{left:e.x*w,top:e.y*w,background:"black"},"".concat(e.x,"_").concat(e.y))}))})},G=function(e){var t=e.position;return Object(x.jsx)(k,{left:t.x*w,top:t.y*w,background:Math.floor(10*Math.random())<5?"red":"blue"})},_=r.a.memo(G),A=f.a.div(O||(O=Object(d.a)(["\n  display: grid;\n  justify-content: center;\n  gap: 4px;\n"]))),C=f.a.div(h||(h=Object(d.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),I=f.a.div(l||(l=Object(d.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),R=[],T=0;T<30;T++)for(var N=0;N<50;N++)R.push({id:T+"_"+N,position:{x:N,y:T},background:"white"});var D={snake:[{x:0,y:0},{x:1,y:0},{x:2,y:0}],food:{},direction:"right",directionQueue:[],gameOver:null,paused:!1,score:0,highestScore:0},H=function(e,t){var n,c,r=e.snake,a=e.food,o=e.direction,i=e.directionQueue,d=e.paused,u=e.score,j=e.highestScore;switch(t.type){case"SNAKE_STEP":for(var O=o,h=Object(b.a)(i);h.length>0;){var l=h.shift();if(c=O,!("left"===(n=l)&&"right"===c||"right"===n&&"left"===c||"up"===n&&"down"===c||"down"===n&&"up"===c)){O=l;break}}var f,x=Object(b.a)(r),g=x[x.length-1];switch(O){case"right":f=Object(s.a)(Object(s.a)({},g),{},{x:g.x+1});break;case"left":f=Object(s.a)(Object(s.a)({},g),{},{x:g.x-1});break;case"up":f=Object(s.a)(Object(s.a)({},g),{},{y:g.y-1});break;case"down":f=Object(s.a)(Object(s.a)({},g),{},{y:g.y+1})}return f.y>=30||f.y<0||f.x<0||f.x>=50||x.some((function(e){return p(e,f)}))?Object(s.a)(Object(s.a)({},e),{},{gameOver:"lose"}):p(f,a)?Object(s.a)(Object(s.a)({},e),{},{snake:[].concat(Object(b.a)(x),[f]),direction:O,directionQueue:h,score:u+1}):Object(s.a)(Object(s.a)({},e),{},{snake:[].concat(Object(b.a)(x.splice(1)),[f]),direction:O,directionQueue:h});case"SPAWN_FOOD":var y=R.filter((function(e){return!r.some((function(t){return p(t,e.position)}))&&!p(a,e.position)}));if(0===y.length)return Object(s.a)(Object(s.a)({},e),{},{gameOver:"win"});var w=Math.floor(Math.random()*y.length);return Object(s.a)(Object(s.a)({},e),{},{food:y[w].position});case"CHANGE_DIRECTION":return Object(s.a)(Object(s.a)({},e),{},{directionQueue:[].concat(Object(b.a)(i),[t.payload])});case"PAUSE_GAME":return Object(s.a)(Object(s.a)({},e),{},{paused:!d});case"RESET_GAME":return Object(s.a)(Object(s.a)({},D),{},{highestScore:j});case"SET_HIGHEST_SCORE":return Object(s.a)(Object(s.a)({},e),{},{highestScore:u});case"TOGGLE_GRID":return Object(s.a)(Object(s.a)({},e),{},{showGrid:t.payload})}},M=function(){var e=Object(c.useReducer)(H,D),t=Object(i.a)(e,2),n=t[0],r=t[1],a=n.snake,o=n.food,s=n.gameOver,b=n.paused,d=n.score,u=n.highestScore,j=n.showGrid;!function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){r({type:"SNAKE_STEP"})}),s||b?null:50);var O=Object(c.useCallback)((function(e){switch(e.key){case"ArrowLeft":case"a":case"A":r({type:"CHANGE_DIRECTION",payload:"left"});break;case"ArrowRight":case"d":case"D":r({type:"CHANGE_DIRECTION",payload:"right"});break;case"ArrowUp":case"w":case"W":r({type:"CHANGE_DIRECTION",payload:"up"});break;case"ArrowDown":case"s":case"S":r({type:"CHANGE_DIRECTION",payload:"down"})}}),[r]);Object(c.useEffect)((function(){s?(window.removeEventListener("keydown",O),d>u&&r({type:"SET_HIGHEST_SCORE"})):(r({type:"SPAWN_FOOD"}),window.addEventListener("keydown",O))}),[s,d,u,O]);return Object(x.jsxs)(A,{children:[Object(x.jsxs)(C,{children:[Object(x.jsxs)("h4",{children:["Score: ",d]}),Object(x.jsxs)("h4",{children:["Highest Score: ",u]})]}),Object(x.jsxs)(y,{width:500,height:300,borderColor:s?"win"===s?"green":"red":"black",children:[Object(x.jsx)(S,{pixels:R,showGrid:j}),Object(x.jsx)(m,{positions:a}),Object(x.jsx)(_,{position:o})]}),Object(x.jsxs)(I,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"checkbox",id:"showGrid",onChange:function(e){r({type:"TOGGLE_GRID",payload:e.target.checked})}}),Object(x.jsx)("label",{htmlFor:"showGrid",children:"Show grid"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(){r({type:"RESET_GAME"})},children:"Play again"}),!s&&Object(x.jsx)("button",{onClick:function(){r({type:"PAUSE_GAME"})},children:b?"Resume":"Pause"})]})]})]})};o.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(M,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.486fa448.chunk.js.map